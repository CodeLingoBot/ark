[c] func printf(fmt: ^u8, ...) -> int;

type Thing struct {
    x: int
};

func (v: Thing) do() {
    C::printf("did! %d\n", v.x);
}

func (v: ^Thing) dop() {
    C::printf("didp! %d\n", v.x);
}

type Thing2 int;

func (v: Thing2) do() {
    C::printf("did, from an int!\n");
}

func (Thing2) do() -> int {
    C::printf("did from a static method!\n");
    return 0;
}

func main() -> int {
    mut thing: Thing;
    thing.x = 6;

    C::printf("%x\n", thing);

    thing.do();

    thingptr: ^Thing = ^Thing(&thing);
    thingptr.dop();
    thingptr.do();

    thingptrptr: ^^Thing = ^^Thing(&thingptr);
    thingptrptr.dop();

    mut thing2: Thing2;

    thing2.do();

    fn := thing2::do;
    fn();

    return Thing2::do();
}
